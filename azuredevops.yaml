pool:
  vmImage: 'ubuntu-18.04'
steps:
- task: Maven@3
  inputs:
    mavenPomFile: 'pom.xml' 
    goals: ' -DskipTests package' 
    publishJUnitResults: true 
    testResultsFiles: 'target/surefire-reports/**/*.xml' # Required when publishJUnitResults == True
    
# Copy files

- task: CopyFiles@2
  inputs:
    sourceFolder: $(system.defaultworkingdirectory)
    targetFolder: $(Build.ArtifactStagingDirectory)
 
 
- task: PublishBuildArtifacts@1
  inputs:
    pathToPublish: $(Build.ArtifactStagingDirectory)
    

- task: PublishTestResults@2
  inputs:
    testResultsFormat: JUnit
    testResultsFiles: '**/TEST-*.xml'
    searchFolder: '$(System.DefaultWorkingDirectory)'

